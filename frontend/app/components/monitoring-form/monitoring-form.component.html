<pnx-modal-msg [bDisplayModal]="bDeleteModal" *ngIf="obj && obj.bIsInitialized">
  <h2>Attention</h2>
  <p>
    Vous êtes sur le point de supprimer l'élément
    {{ this.obj.template['label'] }}
    {{ this.obj.template['description'] }}
  </p>
  <button class="btn btn-danger float-right" (click)="onDelete()">
    <span
      [ngClass]="{ 'hide-spinner': !bDeleteSpinner }"
      class="spinner-border spinner-border-sm"
      role="status"
      aria-hidden="true"
    ></span>
    Confirmer la suppression
  </button>
  <button class="btn btn-primary" (click)="bDeleteModal = false">
    Annuler
  </button>
</pnx-modal-msg>

<div>
  <div
    id="properties-form"
    class="cadre"
    *ngIf="obj.bIsInitialized && objSchema"
  >
    <h3>{{ obj.id ? 'Modification' : 'Création' }} {{ obj.template['label'] }}</h3>
    <form [formGroup]="objForm">

      <pnx-dynamic-form-generator
      class="obj-form"
      #dynamicForm
      [autoGenerated]="true"
      [myFormGroup]="objForm"
      [formsDefinition]="objSchema"
      ></pnx-dynamic-form-generator>
      
      <div>
        <button
        class="btn btn-success"
        (click)="onSubmit(bChainInput)"
        [disabled]="!objForm.valid"
        >
        <span
        [ngClass]="{ 'hide-spinner': !bSaveSpinner }"
        class="spinner-border spinner-border-sm"
        role="status"
        aria-hidden="true"
        ></span>
        
        <span *ngIf="bChainInput && !obj.id">Enregister et enchainer les saisies</span>
        <span *ngIf="!bChainInput || obj.id">Enregister</span>
      </button>
      
      <button class="btn btn-primary" (click)="onCancelEdit()">
        Annuler
      </button>
      <button
      class="btn btn-danger float-right"
      (click)="bDeleteModal = true"
      *ngIf="obj.id"
      >
      Supprimer
    </button>
  </div>
</form>
<div *ngIf="!obj.id">
  <br />
  <input type="checkbox" [(ngModel)]="bChainInput" (change)="bChainInputChanged($event)"  />
  <label for="scales">Enchainer les saisies</label>
</div>
  </div>
</div>
