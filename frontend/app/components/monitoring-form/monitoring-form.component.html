<pnx-modal-msg [bDisplayModal]="bDeleteModal" *ngIf="obj && obj.bIsInitialized">
  <h2>Attention</h2>
  <p>
    Vous êtes sur le point de supprimer l'élément
    {{ this.obj.template['label'] }}
    {{ this.obj.template['description'] }}
  </p>
  <button class="btn btn-danger float-right" (click)="onDelete()">
    <span
      [ngClass]="{ 'hide-spinner': !bDeleteSpinner }"
      class="spinner-border spinner-border-sm"
      role="status"
      aria-hidden="true"
    ></span>
    Confirmer la suppression
  </button>
  <button class="btn btn-primary" (click)="bDeleteModal = false">
    Annuler
  </button>
</pnx-modal-msg>

<div>
  <div
    id="properties-form"
    class="cadre"
    *ngIf="obj.bIsInitialized && objFormsDefinition"
  >
    <h3>{{ obj.id ? 'Modification' : 'Création' }} {{ obj.template['label'] }}
      <span
        *ngIf="!obj.id"
        id="toggle-btn"
        class="float-right"
        matTooltip="Enchainer les saisies"
        matTooltipPosition="left">
        <i class="fa fa-repeat" aria-hidden="true"></i>
        <mat-slide-toggle
          color="primary"
          [(ngModel)]="bChainInput" (change)="bChainInputChanged($event)"
      >
        </mat-slide-toggle>
      </span>

    </h3>
    <form [formGroup]="objForm">

      <pnx-dynamic-form-generator
      class="obj-form"
      #dynamicForm
      [autoGenerated]="true"
      [myFormGroup]="objForm"
      [formsDefinition]="objFormsDefinition"
      ></pnx-dynamic-form-generator>

      <div>
        <button
        class="btn btn-success float-right"
        (click)="onSubmit(bChainInput)"
        [disabled]="!objForm.valid"
        >
        <span
        [ngClass]="{ 'hide-spinner': !bSaveSpinner }"
        class="spinner-border spinner-border-sm float-right"
        role="status"
        aria-hidden="true"
        ></span>

        <span *ngIf="bChainInput && !obj.id">Enregister et enchainer les saisies</span>
        <span *ngIf="!bChainInput || obj.id">Enregister</span>
      </button>

      <button class="btn btn-primary float-left" (click)="onCancelEdit()">
        Annuler
      </button>
      <button
      class="btn btn-danger float-left"
      (click)="bDeleteModal = true"
      *ngIf="obj.id && currentUser?.cruved.D >= 1"
      >
      Supprimer
    </button>
  </div>
  <div class="btn-height"></div>
</form>
  </div>
</div>
